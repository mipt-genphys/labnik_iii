import elabnik.BuildHTMLTask
import elabnik.BuildPdfTask

buildscript {
    project.ext.outputDir = "build/pdf"
}

task preample(type: BuildPdfTask) {
    group = "latex"
    description "Build preamble as pdf"
    source = "Preamble"
}

task build(type: BuildPdfTask) {
    group = "latex"
    description "Build whole labnik as pdf"
    source = "Labnik-III"
}

(1..6).collect { num ->
    tasks.create("chapter$num", BuildPdfTask){
        group = "latex"
        description "Build Chapter $num as pdf"
        target = "Chapter_$num"
        parameters = [
                title: "Chapter_$num",
                fragment: "Chapter_${num}.tex",
                chapter: num
        ]
        source = "Template"
    }

    tasks.create("chapter${num}Html", BuildHTMLTask){
        group = "html"
        description "Build Chapter $num as html"
        target = "Chapter_$num"
        parameters = [
                title: "Chapter_$num",
                fragment: "Chapter_${num}.tex",
                chapter: num
        ]
        source = "Template"
    }
}

task chapters{
    group = "latex"
    description = "Build all chapters as pdfs"
    (1..6).collect{
        dependsOn(":chapter_$it")
    }
}

task test(type: BuildPdfTask) {
    group = "latex"
    description "pdf test"
    source = "Test"
}
